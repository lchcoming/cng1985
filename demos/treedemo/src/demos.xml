<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<!-- 定义一个系统的全局包 -->
	<package name="globalpackage" extends="struts-default">
		<!-- 定义全部的拦截器 -->
		<interceptors>
			<!-- 定义第一个自定义的拦截器，用于身份校验-->
			<interceptor name="isloginInterceptor"
				class="com.gete.common.interceptor.IsLoginInterceptor">
			</interceptor>
			<!-- 定义一个拦截器栈，系统所有Action都需配置 -->
			<interceptor-stack name="islogin">
				<interceptor-ref name="isloginInterceptor"></interceptor-ref>
			</interceptor-stack>
		</interceptors>

		<global-results>
			<!-- 下面定义的结果对所有的Action都有效 -->
			<result name="exception">/error/error.jsp</result>
		</global-results>
		<global-exception-mappings>
			<!-- 指Action抛出AuctionException异常时，转入名为exception的结果。-->
			<!--<exception-mapping exception="com.gete.common.exception.GlobalException" result="exception"/>-->
			<!-- 指Action抛出Exception异常时，转入名为exception的结果。 -->
			<exception-mapping exception="java.lang.Exception"
				result="exception" />
		</global-exception-mappings>
		<action name="gatherReportInfo" class="...">
			<result name="showReportResult" type="redirectAction">
				<param name="actionName">generateReport</param>
				<param name="namespace">/genReport</param>
				<param name="reportType">pie</param>
				<param name="width">100</param>
				<param name="height">100</param>
				<param name="empty"></param>
				<param name="supressEmptyParameters">true</param>
			</result>
		</action>
		<action name="">
			<result name="success" type="stream">
				<param name="contentType">image/jpeg</param>
				<param name="inputName">imageStream</param>
				<param name="contentDisposition">
					attachment;filename="document.pdf"
				</param>
				<param name="bufferSize">1024</param>
			</result>

		</action>
		<action name="gatherReportInfo" class="...">
			<result name="showReportResult" type="redirect">
				<param name="location">generateReport.jsp</param>
				<param name="namespace">/genReport</param>
				<param name="reportType">pie</param>
				<param name="width">100</param>
				<param name="height">100</param>
			</result>
		</action>
		<action name="login" class="...">
			<!-- Chain to another namespace -->
			<result type="chain">
				<param name="actionName">dashboard</param>
				<param name="namespace">/secure</param>
			</result>
		</action>
		<action name="">
			<result name="success" type="dispatcher">
				<param name="location">foo.jsp</param>
			</result>
		</action>
		<action name="">
			<result name="success" type="xslt">
				<param name="location">foo.xslt</param>
				<param name="matchingPattern">^/result/[^/*]$</param>
				<param name="excludingPattern">
					.*(hugeCollection).*
				</param>
			</result>

		</action>


	</package>
</struts>
